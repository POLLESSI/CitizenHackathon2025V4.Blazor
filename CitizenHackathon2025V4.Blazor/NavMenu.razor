@inject NavigationManager NavManager

@inject NavigationManager NavManager

<nav class="nav-container">
    <div class="nav-header">
        <a href="/" class="logo">🌍 <b>OutZen</b></a>
        <button class="nav-toggle" @onclick="ToggleNavMenu" aria-label="Toggle navigation">
            <span class="hamburger"></span>
        </button>
        <DarkModeToggle />
    </div>

    <ul class="nav-links @(collapseNavMenu ? "collapsed" : "")">
        @if (IsHomePage)
        {
            <li><NavLink href="/" @onclick="CloseMenu" class="nav-link" ActiveClass="active">🏠 Accueil</NavLink></li>
            <li><NavLink href="/presentation" class="nav-link" ActiveClass="active">🛡 Presentation</NavLink></li>
            <li><NavLink href="/crowdinfo" class="nav-link" ActiveClass="active">✨ CrowdInfos</NavLink></li>
            <li><NavLink href="/event" @onclick="CloseMenu" class="nav-link" ActiveClass="active">📅 Events</NavLink></li>
            <li><NavLink href="/gptinteraction" @onclick="CloseMenu" class="nav-link" ActiveClass="active">🤖 GPT Interactions</NavLink></li>
            <li><NavLink href="/place" @onclick="CloseMenu" class="nav-link" ActiveClass="active">📍 Places</NavLink></li>
            <li><NavLink href="/suggestion" class="nav-link" ActiveClass="active">💡 Suggestions</NavLink></li>
            <li><NavLink href="/trafficcondition" class="nav-link" ActiveClass="active">🚦 Traffic</NavLink></li>
            <li><NavLink href="/user" @onclick="CloseMenu" class="nav-link" ActiveClass="active">👤 Users</NavLink></li>
            <li><NavLink href="/weatherforecast" class="nav-link" ActiveClass="active">🌤 Weather</NavLink></li>

            <li><NavLink href="/privacy">🔐 Privacy</NavLink></li>
        }
        else
        {
            <li><NavLink href="/" @onclick="CloseMenu">⬅️ Back Home</NavLink></li>
        }
    </ul>
</nav>
@* <NavLink class="nav-link" href="csp-dashboard">
    <span class="oi oi-lock-locked" aria-hidden="true"></span> CSP Dashboard
</NavLink> *@

@code {
    private bool collapseNavMenu = true;

    private string? NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu() => collapseNavMenu = !collapseNavMenu;

    private record MenuItem(string Text, string Href, string Icon, NavLinkMatch Match);

    private bool IsMenuOpen;
    private bool IsHomePage => NavManager.Uri.EndsWith("/");

    protected override void OnInitialized() =>
        NavManager.LocationChanged += (_, _) => StateHasChanged();

    private void CloseMenu() => collapseNavMenu = true;


}






























































































@* // Copyrigtht (c) 2025 Citizen Hackathon https://github.com/POLLESSI/Citizenhackathon2025V4.Blazor.Client. All rights reserved. *@